<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Nicolas Bedos" />
  <meta name="dcterms.date" content="2019-12-03" />
  <title>CITOP(1) | version 0.0.0-79-g9440cfc-dirty</title>
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <link rel="stylesheet" href="./style.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">CITOP(1) | version 0.0.0-79-g9440cfc-dirty</h1>
<p class="author">Nicolas Bedos</p>
<p class="date">December 03, 2019</p>
</header>
<h1 id="name">NAME</h1>
<p><strong>citop</strong> – Continuous Integration Table Of Pipelines</p>
<h1 id="synopsis">SYNOPSIS</h1>
<p><code>citop [-r REPOSITORY | --repository REPOSITORY] [COMMIT]</code></p>
<p><code>citop -h | --help</code></p>
<p><code>citop --version</code></p>
<h1 id="description">DESCRIPTION</h1>
<p>citop monitors the CI pipelines associated to a specific commit of a git repository.</p>
<p>citop currently integrates with the following online services. Each of the service is one or both of the following:</p>
<ul>
<li>A “source provider” that is used to list the pipelines associated to a given commit of an online repository</li>
<li>A “CI provider” that is used to get detailed information about CI builds</li>
</ul>
<table style="width:79%;">
<colgroup>
<col style="width: 16%" />
<col style="width: 12%" />
<col style="width: 11%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Service</th>
<th style="text-align: left;">Source</th>
<th style="text-align: left;">CI</th>
<th style="text-align: left;">URL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">GitHub</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;"><a href="https://github.com/">https://github.com/</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">GitLab</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;"><a href="https://gitlab.com/">https://gitlab.com/</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">AppVeyor</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;"><a href="https://www.appveyor.com/">https://www.appveyor.com/</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">CircleCI</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;"><a href="https://circleci.com/">https://circleci.com/</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Travis CI</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;"><a href="https://travis-ci.org/">https://travis-ci.org/</a> <a href="https://travis-ci.com/">https://travis-ci.com/</a></td>
</tr>
</tbody>
</table>
<h1 id="positional-arguments">POSITIONAL ARGUMENTS</h1>
<h2 id="commit"><code>COMMIT</code></h2>
<p>Specify the commit to monitor. COMMIT is expected to be the SHA identifier of a commit, or the name of a tag or a branch. If this option is missing citop will monitor the commit referenced by HEAD.</p>
<p>Example:</p>
<pre class="shell"><code># Show pipelines for commit 64be3c6
citop 64be3c6
# Show pipelines for the commit referenced by the tag &#39;0.9.0&#39;
citop 0.9.0
# Show pipelines for the commit at the tip of a branch
citop feature/doc</code></pre>
<h1 id="options">OPTIONS</h1>
<h2 id="rrepository---repositoryrepository"><code>-r=REPOSITORY, --repository=REPOSITORY</code></h2>
<p>Specify the git repository to work with. REPOSITORY can be either a path to a local git repository, or the URL of an online repository hosted at GitHub or GitLab. Both web URLs and git URLs are accepted.</p>
<p>In the absence of this option, citop will work with the git repository located in the current directory. If there is no such repository, citop will fail.</p>
<p>Examples:</p>
<pre class="shell"><code># Work with the git repository in the current directory
citop
# Work with the repository specified by a web URL
citop -r https://gitlab.com/nbedos/citop
citop -r github.com/nbedos/citop
# Git URLs are accepted
citop -r git@github.com:nbedos/citop.git
# Paths to a local repository are accepted too
citop -r /home/user/repos/myrepo</code></pre>
<h2 id="h---help"><code>-h, --help</code></h2>
<p>Show usage of citop</p>
<h2 id="version"><code>--version</code></h2>
<p>Print the version of citop being run</p>
<h1 id="interactive-commands">INTERACTIVE COMMANDS</h1>
<p>Below are the default commands for interacting with citop.</p>
<table style="width:82%;">
<colgroup>
<col style="width: 15%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Key</th>
<th style="text-align: left;">Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Up, j</td>
<td style="text-align: left;">Move cursor up by one line</td>
</tr>
<tr class="even">
<td style="text-align: left;">Down, k</td>
<td style="text-align: left;">Move cursor down by one line</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Page Up</td>
<td style="text-align: left;">Move cursor up by one screen</td>
</tr>
<tr class="even">
<td style="text-align: left;">Page Down</td>
<td style="text-align: left;">Move cursor down by one screen</td>
</tr>
<tr class="odd">
<td style="text-align: left;">o, +</td>
<td style="text-align: left;">Open the fold at the cursor</td>
</tr>
<tr class="even">
<td style="text-align: left;">O</td>
<td style="text-align: left;">Open the fold at the cursor and all sub-folds</td>
</tr>
<tr class="odd">
<td style="text-align: left;">c, -</td>
<td style="text-align: left;">Close the fold at the cursor</td>
</tr>
<tr class="even">
<td style="text-align: left;">C</td>
<td style="text-align: left;">Close the fold at the cursor and all sub-folds</td>
</tr>
<tr class="odd">
<td style="text-align: left;">/</td>
<td style="text-align: left;">Open search prompt</td>
</tr>
<tr class="even">
<td style="text-align: left;">Escape</td>
<td style="text-align: left;">Close search prompt</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Enter, n</td>
<td style="text-align: left;">Move to the next match</td>
</tr>
<tr class="even">
<td style="text-align: left;">N</td>
<td style="text-align: left;">Move to the previous match</td>
</tr>
<tr class="odd">
<td style="text-align: left;">v</td>
<td style="text-align: left;">View the log of the job at the cursor<sup>[a]</sup></td>
</tr>
<tr class="even">
<td style="text-align: left;">b</td>
<td style="text-align: left;">Open with default web browser</td>
</tr>
<tr class="odd">
<td style="text-align: left;">q</td>
<td style="text-align: left;">Quit</td>
</tr>
<tr class="even">
<td style="text-align: left;">?</td>
<td style="text-align: left;">View manual page</td>
</tr>
</tbody>
</table>
<ul>
<li><sup>[a]</sup> Note that if the job is still running, the log may be incomplete.</li>
</ul>
<h1 id="configuration-file">CONFIGURATION FILE</h1>
<h2 id="location">Location</h2>
<p>citop follows the XDG base directory specification [2] and expects to find the configuration file at one of the following locations depending on the value of the two environment variables <code>XDG_CONFIG_HOME</code> and <code>XDG_CONFIG_DIRS</code>:</p>
<ol type="1">
<li><code>"$XDG_CONFIG_HOME/citop/citop.toml"</code></li>
<li><code>"$DIR/citop/citop.toml"</code> for every directory <code>DIR</code> in the comma-separated list <code>"$XDG_CONFIG_DIRS"</code></li>
</ol>
<p>If <code>XDG_CONFIG_HOME</code> (resp. <code>XDG_CONFIG_DIRS</code>) is not set, citop uses the default value <code>"$HOME/.config"</code> (resp. <code>"/etc/xdg"</code>) instead.</p>
<h2 id="format">Format</h2>
<p>citop uses a configuration file in <a href="https://github.com/toml-lang/toml/blob/master/versions/en/toml-v0.5.0.md">TOML version v0.5.0</a> format. The configuration file is made of keys grouped together in tables. The specification of each table is given below.</p>
<h3 id="table-providers">Table <code>[providers]</code></h3>
<p>The ‘providers’ table is used to define credentials for accessing online services. citop relies on two types of providers:</p>
<ul>
<li>‘source providers’ are used for listing the CI pipelines associated to a given commit (GitHub and GitLab are source providers)</li>
<li>‘CI providers’ are used to get detailed information about CI pipelines (GitLab, AppVeyor, CircleCI and Travis are CI providers)</li>
</ul>
<p>citop requires credentials for at least one source provider and one CI provider to run.</p>
<h3 id="table-providers.gitlab">Table <code>[[providers.gitlab]]</code></h3>
<p><code>[[providers.gitlab]]</code> defines a GitLab account</p>
<table style="width:82%;">
<colgroup>
<col style="width: 12%" />
<col style="width: 69%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Key</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">name</td>
<td style="text-align: left;">Name under which this provider appears in the TUI (string, optional, default: “gitlab”)</td>
</tr>
<tr class="even">
<td style="text-align: left;">url</td>
<td style="text-align: left;">URL of the GitLab instance (string, optional, default: “gitlab.com”)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">token</td>
<td style="text-align: left;">Personal access token for the GitLab API (string, optional, default: "")</td>
</tr>
</tbody>
</table>
<p>GitLab access tokens are managed at <a href="https://gitlab.com/profile/personal_access_tokens">https://gitlab.com/profile/personal_access_tokens</a></p>
<p>Example:</p>
<pre class="toml"><code>[[providers.gitlab]]
name = &quot;gitlab.com&quot;
url = &quot;https://gitlab.com&quot;
token = &quot;gitlab_api_token&quot;</code></pre>
<h3 id="table-providers.github">Table <code>[[providers.github]]</code></h3>
<p><code>[[providers.github]]</code> defines a GitHub account</p>
<table style="width:83%;">
<colgroup>
<col style="width: 11%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Key</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">token</td>
<td style="text-align: left;">Personal access token for the GitHub API (string, optional, default: "")</td>
</tr>
</tbody>
</table>
<p>GitHub access tokens are managed at <a href="https://github.com/settings/tokens">https://github.com/settings/tokens</a></p>
<p>Example:</p>
<pre class="toml"><code>[[providers.github]]
token = &quot;github_api_token&quot;</code></pre>
<h3 id="table-providers.travis">Table <code>[[providers.travis]]</code></h3>
<p><code>[[providers.travis]]</code> defines a Travis CI account</p>
<table style="width:83%;">
<colgroup>
<col style="width: 11%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Key</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">name</td>
<td style="text-align: left;">Name under which this provider appears in the TUI (string, mandatory)</td>
</tr>
<tr class="even">
<td style="text-align: left;">url</td>
<td style="text-align: left;">URL of the GitLab instance. “org” and “com” can be used as shorthands for the full URL of travis.org and travis.com (string, mandatory)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">token</td>
<td style="text-align: left;">Personal access token for the Travis API (string, optional, default: "")</td>
</tr>
</tbody>
</table>
<p>Travis access tokens are managed at the following locations:</p>
<ul>
<li><a href="https://travis-ci.org/account/preferences">https://travis-ci.org/account/preferences</a></li>
<li><a href="https://travis-ci.com/account/preferences">https://travis-ci.com/account/preferences</a></li>
</ul>
<p>Example:</p>
<pre class="toml"><code>[[providers.travis]]
name = &quot;travis.org&quot;
url = &quot;org&quot;
token = &quot;travis_org_api_token&quot;

[[providers.travis]]
name = &quot;travis.com&quot;
url = &quot;com&quot;
token = &quot;travis_com_api_token&quot;</code></pre>
<h3 id="table-providers.appveyor">Table <code>[[providers.appveyor]]</code></h3>
<p><code>[[providers.appveyor]]</code> defines an AppVeyor account</p>
<table style="width:82%;">
<colgroup>
<col style="width: 11%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Key</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">name</td>
<td style="text-align: left;">Name under which this provider appears in the TUI (string, optional, default: “appveyor”)</td>
</tr>
<tr class="even">
<td style="text-align: left;">token</td>
<td style="text-align: left;">Personal access token for the AppVeyor API (string, optional, default: "")</td>
</tr>
</tbody>
</table>
<p>AppVeyor access tokens are managed at <a href="https://ci.appveyor.com/api-keys">https://ci.appveyor.com/api-keys</a></p>
<p>Example:</p>
<pre class="toml"><code>[[providers.appveyor]]
name = &quot;appveyor&quot;
token = &quot;appveyor_api_key&quot;</code></pre>
<h3 id="table-providers.circleci">Table <code>[[providers.circleci]]</code></h3>
<p><code>[[providers.circleci]]</code> defines a CircleCI account</p>
<table style="width:82%;">
<colgroup>
<col style="width: 11%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Key</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">name</td>
<td style="text-align: left;">Name under which this provider appears in the TUI (string, optional, default: “circleci”)</td>
</tr>
<tr class="even">
<td style="text-align: left;">token</td>
<td style="text-align: left;">Personal access token for the CircleCI API (string, optional, default: "")</td>
</tr>
</tbody>
</table>
<p>CircleCI access tokens are managed at <a href="https://circleci.com/account/api">https://circleci.com/account/api</a></p>
<p>Example:</p>
<pre class="toml"><code>[[providers.circleci]]
name = &quot;circleci&quot;
token = &quot;circleci_api_token&quot;</code></pre>
<h3 id="examples">Examples</h3>
<p>Here are a few examples of <code>citop.toml</code> configuration files.</p>
<p>Monitor pipelines on Travis CI, AppVeyor and CircleCI for a repository hosted on GitHub:</p>
<pre class="toml"><code>[[providers.github]]
token = &quot;github_api_token&quot;

[[providers.travis]]
url = &quot;org&quot;
token = &quot;travis_org_api_token&quot;

[[providers.appveyor]]
token = &quot;appveyor_api_key&quot;

[[providers.circleci]]
token = &quot;circleci_api_token&quot;</code></pre>
<p>Monitor pipelines on GitLab CI for a repository hosted on GitLab itself:</p>
<pre class="toml"><code>[[providers.gitlab]]
token = &quot;gitlab_api_token&quot;</code></pre>
<h1 id="environment">ENVIRONMENT</h1>
<h2 id="environment-variables">ENVIRONMENT VARIABLES</h2>
<ul>
<li><code>BROWSER</code> is used to find the path of the default web browser</li>
<li><code>HOME</code>, <code>XDG_CONFIG_HOME</code> and <code>XDG_CONFIG_DIRS</code> are used to locate the configuration file</li>
</ul>
<h2 id="local-programs">LOCAL PROGRAMS</h2>
<p>citop relies on the following local executables:</p>
<ul>
<li><code>git</code> to translate the abbreviated SHA identifier of a commit into a non-abbreviated SHA</li>
<li><code>less</code> to show job logs</li>
<li><code>man</code> to show the manual page</li>
</ul>
<h1 id="examples-1">EXAMPLES</h1>
<p>Show pipelines associated to the HEAD of the current git repository</p>
<pre class="shell"><code>citop</code></pre>
<p>Show pipelines associated to a specific commit, tag or branch</p>
<pre class="shell"><code>citop 64be3c6
citop 0.9.0
citop feature/doc</code></pre>
<p>Show pipelines of a repository specified by a URL</p>
<pre class="shell"><code>citop -r https://gitlab.com/nbedos/citop
citop -r git@github.com:nbedos/citop.git
citop -r github.com/nbedos/citop</code></pre>
<p>Show pipelines of a local repository specified by a path</p>
<pre class="shell"><code>citop -r /home/user/repos/myrepo</code></pre>
<p>Specify both repository and commit</p>
<pre class="shell"><code>citop -r github.com/nbedos/citop 64be3c6</code></pre>
<h1 id="notes">NOTES</h1>
<ol type="1">
<li><strong>citop repository</strong>
<ul>
<li><a href="https://github.com/nbedos/citop">https://github.com/nbedos/citop</a></li>
</ul></li>
<li><strong>XDG base directory specification</strong>
<ul>
<li><a href="https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html">https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html</a></li>
</ul></li>
</ol>
</body>
</html>
